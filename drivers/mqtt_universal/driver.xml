<devicedata>
  <name>MQTT Universal</name>
  <version/>
  <manufacturer>Finite Labs</manufacturer>
  <model>MQTT Universal</model>
  <creator>Derek Miller</creator>
  <small image_source="c4z">icons/device_sm.png</small>
  <large image_source="c4z">icons/device_lg.png</large>
  <control>lua_gen</control>
  <driver>DriverWorks</driver>
  <copyright>Copyright 2026 Finite Labs, LLC. All rights reserved.</copyright>
  <created>12/31/2025 12:00:00 PM</created>
  <modified/>
  <combo>true</combo>
  <minimum_os_version>3.3.0</minimum_os_version>
  <composer_categories>
    <category>Misc</category>
  </composer_categories>
  <conditionals/>
  <events/>
  <config>
    <script file="driver.lua" jit="1"/>
    <documentation file="www/documentation/index.html"/>
    <properties>
      <!-- #ifdef DRIVERCENTRAL -->
      <property>
        <name>Cloud Settings</name>
        <type>LABEL</type>
        <default>Cloud Settings</default>
      </property>
      <property>
        <name>Cloud Status</name>
        <default/>
        <type>STRING</type>
        <readonly>true</readonly>
      </property>
      <property>
        <name>Automatic Updates</name>
        <type>LIST</type>
        <items>
          <item>Off</item>
          <item>On</item>
        </items>
        <default>On</default>
      </property>
      <!-- #endif -->
      <property>
        <name>Driver Settings</name>
        <type>LABEL</type>
        <default>Driver Settings</default>
      </property>
      <property>
        <name>Driver Status</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
      </property>
      <property>
        <name>Driver Version</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
      </property>
      <property>
        <name>Log Level</name>
        <type>LIST</type>
        <default>3 - Info</default>
        <items>
          <item>0 - Fatal</item>
          <item>1 - Error</item>
          <item>2 - Warning</item>
          <item>3 - Info</item>
          <item>4 - Debug</item>
          <item>5 - Trace</item>
          <item>6 - Ultra</item>
        </items>
      </property>
      <property>
        <name>Log Mode</name>
        <type>LIST</type>
        <default>Off</default>
        <items>
          <item>Off</item>
          <item>Print</item>
          <item>Log</item>
          <item>Print and Log</item>
        </items>
      </property>
      <!-- Global Availability Settings -->
      <property>
        <name>Availability Settings</name>
        <type>LABEL</type>
        <default>Availability Settings</default>
      </property>
      <property>
        <name>Availability Topic</name>
        <type>STRING</type>
        <default/>
        <description>Topic to subscribe for device availability (optional)</description>
      </property>
      <property>
        <name>Availability Topic Value</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
        <description>Raw value received from the availability topic</description>
      </property>
      <property>
        <name>Availability Value Path</name>
        <type>STRING</type>
        <default/>
        <description>JSONPath to extract availability value (e.g., "$.status"). Leave empty to use raw payload.</description>
      </property>
      <property>
        <name>Availability Value Path Result</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
        <description>Result of JSONPath extraction for availability</description>
      </property>
      <property>
        <name>Availability Status</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
        <description>Current availability status</description>
      </property>
      <property>
        <name>Payload Available</name>
        <type>STRING</type>
        <default/>
        <description>Payload that indicates device is available (if only this is set, other values mean unavailable)</description>
      </property>
      <property>
        <name>Payload Not Available</name>
        <type>STRING</type>
        <default/>
        <description>Payload that indicates device is not available (if only this is set, other values mean available)</description>
      </property>
      <!-- Add Devices Section -->
      <property>
        <name>Add Devices</name>
        <type>LABEL</type>
        <default>Add Devices</default>
      </property>
      <property>
        <name>Add Relay</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new MQTT relay (RELAY binding)</description>
      </property>
      <property>
        <name>Add Contact</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new MQTT contact sensor (CONTACT_SENSOR binding)</description>
      </property>
      <property>
        <name>Add Button</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new MQTT button (publishes press commands)</description>
      </property>
      <property>
        <name>Add Event</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new MQTT event (triggers BUTTON_LINK on MQTT messages)</description>
      </property>
      <!-- Add Variables Section -->
      <property>
        <name>Add Variables</name>
        <type>LABEL</type>
        <default>Add Variables</default>
      </property>
      <property>
        <name>Add String Variable</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new STRING variable</description>
      </property>
      <property>
        <name>Add Bool Variable</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new BOOL variable</description>
      </property>
      <property>
        <name>Add Number Variable</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new NUMBER variable</description>
      </property>
      <property>
        <name>Add Float Variable</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a new FLOAT variable</description>
      </property>
      <property>
        <name>Add Temperature Variable</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a TEMPERATURE variable (exposes TEMPERATURE_VALUE binding)</description>
      </property>
      <property>
        <name>Add Humidity Variable</name>
        <type>STRING</type>
        <default/>
        <description>Enter a name to create a HUMIDITY variable (exposes HUMIDITY_VALUE binding)</description>
      </property>
      <!-- Manage Items Section -->
      <property>
        <name>Manage Items</name>
        <type>LABEL</type>
        <default>Manage Items</default>
      </property>
      <property>
        <name>Remove Item</name>
        <type>DYNAMIC_LIST</type>
        <description>Select a device or variable to remove</description>
      </property>
      <property>
        <name>Configure Item</name>
        <type>DYNAMIC_LIST</type>
        <description>Select a device or variable to configure MQTT settings</description>
      </property>
      <!-- Item Configuration Section -->
      <property>
        <name>Item Configuration</name>
        <type>LABEL</type>
        <default>Item Configuration</default>
      </property>
      <property>
        <name>State Topic</name>
        <type>STRING</type>
        <default/>
        <description>Topic to subscribe for state updates</description>
      </property>
      <property>
        <name>State Topic Value</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
        <description>Raw value received from the state topic</description>
      </property>
      <property>
        <name>Value Path</name>
        <type>STRING</type>
        <default/>
        <description>JSONPath expression to extract value (e.g., "$.sensors.temperature" or "$.data[0].value"). Leave empty to use raw payload.</description>
      </property>
      <property>
        <name>Value Path Result</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
        <description>Result of JSONPath extraction (shows extracted value or error)</description>
      </property>
      <property>
        <name>State</name>
        <type>STRING</type>
        <default/>
        <readonly>true</readonly>
        <description>Current state of the selected item</description>
      </property>
      <property>
        <name>State On</name>
        <type>STRING</type>
        <default/>
        <description>Payload that indicates ON state (if only this is set, other values mean OFF)</description>
      </property>
      <property>
        <name>State Off</name>
        <type>STRING</type>
        <default/>
        <description>Payload that indicates OFF state (if only this is set, other values mean ON)</description>
      </property>
      <property>
        <name>Command Topic</name>
        <type>STRING</type>
        <default/>
        <description>Topic to publish commands to</description>
      </property>
      <!-- Relay-specific properties -->
      <property>
        <name>Payload On</name>
        <type>STRING</type>
        <default>ON</default>
        <description>Payload to send for ON command</description>
      </property>
      <property>
        <name>Payload Off</name>
        <type>STRING</type>
        <default>OFF</default>
        <description>Payload to send for OFF command</description>
      </property>
      <property>
        <name>Optimistic</name>
        <type>LIST</type>
        <default>Auto</default>
        <items>
          <item>Auto</item>
          <item>Yes</item>
          <item>No</item>
        </items>
        <description>Update state immediately on command (Auto: yes if no State Topic)</description>
      </property>
      <!-- Contact-specific properties -->
      <property>
        <name>State Open</name>
        <type>STRING</type>
        <default>OPEN</default>
        <description>Payload that indicates OPEN state (if only this is set, other values mean CLOSED)</description>
      </property>
      <property>
        <name>State Closed</name>
        <type>STRING</type>
        <default>CLOSED</default>
        <description>Payload that indicates CLOSED state (if only this is set, other values mean OPEN)</description>
      </property>
      <!-- Button-specific properties -->
      <property>
        <name>Payload Press</name>
        <type>STRING</type>
        <default>PRESS</default>
        <description>Payload to send when button is pressed</description>
      </property>
      <!-- Event-specific properties -->
      <property>
        <name>Event Type Filter</name>
        <type>STRING</type>
        <default/>
        <description>Comma-separated list of event types to accept (e.g., "press,hold"). Leave empty to accept all.</description>
      </property>
      <!-- Common properties -->
      <property>
        <name>QoS</name>
        <type>LIST</type>
        <default>0</default>
        <items>
          <item>0</item>
          <item>1</item>
          <item>2</item>
        </items>
        <description>MQTT Quality of Service level</description>
      </property>
      <property>
        <name>Retain</name>
        <type>LIST</type>
        <default>No</default>
        <items>
          <item>Yes</item>
          <item>No</item>
        </items>
        <description>Retain command messages on the broker</description>
      </property>
      <!-- Temperature-specific properties -->
      <property>
        <name>Temperature Scale</name>
        <type>LIST</type>
        <default>Celsius</default>
        <items>
          <item>Celsius</item>
          <item>Fahrenheit</item>
        </items>
        <description>Scale of temperature values from MQTT (only for TEMPERATURE items)</description>
      </property>
    </properties>
    <commands>
      <command>
        <name>Press</name>
        <description>Press NAME button PARAM1</description>
        <params>
          <param>
            <name>Button</name>
            <type>DYNAMIC_LIST</type>
          </param>
        </params>
      </command>
    </commands>
  </config>
  <capabilities/>
  <connections>
    <connection>
      <id>5001</id>
      <facing>6</facing>
      <connectionname>MQTT Broker</connectionname>
      <type>2</type>
      <consumer>True</consumer>
      <audiosource>False</audiosource>
      <videosource>False</videosource>
      <linelevel>False</linelevel>
      <classes>
        <class>
          <classname>MQTT_BROKER</classname>
          <autobind>True</autobind>
        </class>
      </classes>
      <hidden>False</hidden>
    </connection>
  </connections>
</devicedata>